<!DOCTYPE html>
<html>

<head>
    <title>Kaboomlaser Entropy</title>
    <!-- STYLE SHEETS-->
    <link rel="stylesheet" type="text/css" href="css/experiments.css" />
    <link rel="stylesheet" type="text/css" href="css/gradientui.css" />
    <link type="text/css" href="css/jquery-ui-1.8.16.custom.css" rel="stylesheet" />
    <!--  LIBRARIES -->
    <script type="text/javascript" src="js/jquery/jquery-1.6.2.min.js"></script>
    <script type="text/javascript" src="js/jquery/jquery-ui-1.8.16.custom.min.js"></script>
    <script type="text/javascript" src="js/three/three.min.js"></script>
    <script type="text/javascript" src="js/three/three.js"></script>
    <script type="text/javascript" src="js/three/OBJLoader.js"></script>

    <!-- CODE -->
    <script type="text/javascript" src="js/entropy/gradientui.js"></script>
    <script type="text/javascript" src="js/entropy/colorPicker.js"></script>
    <script type="text/javascript" src="js/entropy/grayscott.js"></script>

    <meta charset="UTF-8">
    <style>
        #gradient {
            height: 40px;
            width: 85%;
            margin-top: 5px;
            margin-left: auto;
            margin-right: auto;
        }
    </style>
    <script>
        $(function () {
            $("#gradient").gradient({
                values:
                    [[0, '#000000'],
                    [0.2, '#00FF00'],
                    [0.21, '#FFFF00'],
                    [0.4, '#FF0000'],
                    [0.6, '#FFFFFF']]
            });

            // KLUDGE!
            colorPicker.offsetX = -512;
            colorPicker.offsetY = -256;
            document.getElementById("gradient").onselectstart = function () { return false; };
            loadshaders();
            //init();
        });
    </script>
</head>

<body>

    <header>
        <h1>Reaction diffusion system (Gray-Scott model)</h1>
    </header>
    <div id="simulation">
        <canvas id="myCanvas" class="viewer" style="width:1024px;height:1024px"></canvas>
        <aside class="panel">
            <section id="instructions">
                <header>
                    <h4>Instructions</h4>
                </header>
                <ol>
                    <li>Paint some strokes on the canvas.</li>
                    <li>Choose the evolution settings with the controls below.</li>
                    <li>Watch the evolution.</li>
                </ol>
            </section>
            <section id="controls">
                <!--header><h4>Controls</h4></header-->
                <form name="ex">
                    Presets:
                    <select name="scene" style="width:100%" onchange="loadPreset(document.ex.scene.selectedIndex)">
                        <option value="0">Negative bubbles (sigma)</option>
                        <option value="1">Bubbles (rho)</option>
                        <option value="2">Precritical bubbles (rho/kappa)</option>
                        <option value="3" selected="selected">Worms and loops (kappa)</option>
                        <option value="4">Stable solitons (nu)</option>
                        <option value="5">The U-Skate world (pi)</option>
                        <option value="6">Worms (mu)</option>
                        <option value="7">Worms join into maze (kappa)</option>
                        <option value="8">Negatons (iota)</option>
                        <option value="9">Turing patterns (delta)</option>
                        <option value="10">Chaos to Turing negatons (beta)</option>
                        <option value="11">Fingerprints (theta/kappa)</option>
                        <option value="12">Chaos with negatons (beta/delta)</option>
                        <option value="13">Spots and worms (eta)</option>
                        <option value="14">Self-replicating spots (lambda)</option>
                        <option value="15">Super-resonant mazes (theta)</option>
                        <option value="16">Mazes (kappa)</option>
                        <option value="17">Mazes with some chaos (gamma)</option>
                        <option value="18">Chaos (beta)</option>
                        <option value="19">Pulsating solitons (zeta)</option>
                        <option value="20">Warring microbes (epsilon)</option>
                        <option value="21">Spots and loops (alpha)</option>
                        <option value="22">Moving spots (alpha)</option>
                        <option value="23">Waves (xi)</option>

                    </select>
                </form>
                <p style="text-align:center">
                    <button id="btn_clear" onclick="clean()">Clear</button>
                    <button id="btn_snapshot" onclick="snapshot()">Take snapshot</button>
                    <button id="btn_fullscreen" onclick="fullscreen()">Fullscreen mode</button>
                    <p />
                <h4 class="unsafe">Advanced settings</h4>
                Feed rate:
                <span class="remark" id="replenishment"></span><br />
                <div id="sld_replenishment" class="slider"></div>

                Death rate:
                <span class="remark" id="diminishment"></span><br />
                <div id="sld_diminishment" class="slider"></div>
                Colors:
                <div id="gradient" style=""></div>
                <div style="font-size:x-small">Share (paste and press enter):</div>
                <div style="text-align:center"><input id="share" style="width:85%" /></div>
            </section>
        </aside>
    </div>
    <footer>
        <div id="copyright">
            &copy;2012
            <a href="https://twitter.com/pmneila">@pmneila</a>
            <a href="https://github.com/pmneila/jsexp">Github</a>
            <a id="notworking" href="#">Not working?</a>
        </div>
    </footer>

    <div id="requirement_dialog" title="Requirements">
        <p>This simulation requires the GL extensions framebuffer_object and texture_float.
            If you cannot see the simulation your system probably lacks at least one of these extensions.</p>

        <p>In Google Chrome, you can see the available GL extensions going to chrome://gpu.</p>
    </div>
</body>

</html>